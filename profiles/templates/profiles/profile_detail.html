{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">

<div class="profile-container">
  <div class="profile-card">
    <div class="profile-header">
      <span class="sparkle-decoration">‚ú®</span>
      <span class="decorative-hearts">üíú</span>
      
      <div class="profile-image-wrapper">
        {% if profile.profile_image %}
          <img src="{{ profile.profile_image.url }}" alt="{{ profile.user.username }}'s profile photo" class="profile-image">
        {% else %}
          <div class="profile-placeholder">üòä</div>
        {% endif %}
      </div>
    </div>
    
    <div class="profile-body">
      
      
      <h1 class="profile-username">
        {{ profile.user.username }}
        <span class="verified-badge">‚úì</span>
      </h1>
      
      <p class="profile-bio">{{ profile.bio }}</p>
      
      <div class="profile-actions">
        {% if request.user == profile.user %}
          <a href="{% url 'profile_update' %}" class="btn btn-primary">
            ‚úèÔ∏è Edit Profile
          </a>
          
        {% elif request.user.is_authenticated %}
          <form method="post" action="{% url 'toggle_support' profile.user.username %}" style="display:inline">
            {% csrf_token %}
            {% if profile.is_supported_by_me %}
              <button type="submit" class="btn btn-primary">Un-support</button>
            {% else %}
              <button type="submit" class="btn btn-primary">Support</button>
            {% endif %}
          </form>
          <a href="{% url 'message:chat_with_user' profile.user.pk %}" class="btn btn-primary" style="margin-left:8px;">üí¨ Message</a>
        {% endif %}
      </div>
      
      {% comment %} Applicant / Hiring partner details from jobPanel {% endcomment %}
      {% if applicant_profile %}
        <hr style="margin:18px 0;">
        <h3>Applicant Details</h3>
        <p><strong>Headline:</strong> {{ applicant_profile.headline }}</p>
        <p><strong>Location:</strong> {{ applicant_profile.location }}</p>
        <p><strong>Skills:</strong> {{ applicant_profile.skills }}</p>
        <p><strong>Experience:</strong> {{ applicant_profile.experience }}</p>
        {% if applicant_profile.resume %}
          <p><a href="{{ applicant_profile.resume.url }}" target="_blank">Download resume</a></p>
        {% endif %}
      {% endif %}

      {% if hiring_profile %}
        <hr style="margin:18px 0;">
        <h3>Hiring Partner</h3>
        <p><strong>Company:</strong> {{ hiring_profile.company_name }}</p>
        {% if hiring_profile.website %}
          <p><strong>Website:</strong> <a href="{{ hiring_profile.website }}" target="_blank">{{ hiring_profile.website }}</a></p>
        {% endif %}
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
