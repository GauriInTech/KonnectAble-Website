{% extends 'base.html' %}
{% load static %}
{% block head %}
  <link rel="stylesheet" href="{% static 'css/applicant_dashboard.css' %}">
{% endblock %}
{% block content %}
  <div class="dashboard-container">
    <div class="d-flex justify-content-between align-items-start">
      <h2>Applicant Dashboard</h2>
      <div class="text-muted small">Welcome, {{ request.user.username }}</div>
    </div>

    <p class="welcome-msg">Here are available jobs and your recent applications.</p>

    <section aria-labelledby="available-jobs">
      <h3 id="available-jobs">Available Jobs</h3>
      <ul>
        {% for job in jobs %}
          <li>
            <div>
              <div class="job-title"><a href="{% url 'job_detail' job.pk %}">{{ job.title }}</a></div>
              <div class="job-company">{{ job.company }}</div>
            </div>
            <div class="job-actions">
              {% if job.pk in applied_job_ids %}
                <em>Applied</em>
              {% else %}
                <a class="apply-link" href="{% url 'job_detail' job.pk %}">View & Apply</a>
              {% endif %}
            </div>
          </li>
        {% empty %}
          <li class="empty-state">No jobs available.</li>
        {% endfor %}
      </ul>
    </section>

    <section aria-labelledby="your-applications">
      <h3 id="your-applications">Your Applications</h3>
      <ul>
        {% for app in applications %}
          <li>
            <div>
              <strong>{{ app.job.title }}</strong>
              <div class="status {% if app.status == 'applied' %}status-pending{% elif app.status == 'hired' %}status-accepted{% elif app.status == 'rejected' %}status-rejected{% endif %}">{{ app.status|capfirst }}</div>
            </div>
            <div>
              {% if app.resume %}<a class="resume-link" href="{{ app.resume.url }}">View resume</a>{% endif %}
            </div>
          </li>
        {% empty %}
          <li class="empty-state">You haven't applied to any jobs yet.</li>
        {% endfor %}
      </ul>
    </section>
  </div>
{% endblock %}
